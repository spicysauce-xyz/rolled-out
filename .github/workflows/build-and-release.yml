name: Build and Release

on:
  release:
    types: [published]

jobs:
  build:
    permissions:
      contents: read
      packages: write

    uses: ./.github/workflows/build.yml
    with:
      release_tag: ${{ github.event.release.tag_name }}

  release:
    needs: build
    uses: ./.github/workflows/release.yml
    with:
      release_tag: ${{ github.event.release.tag_name }}
